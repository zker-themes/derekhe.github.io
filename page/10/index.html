<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> APRIL 1985</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.april1985.com/atom.xml" title="APRIL 1985"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">APRIL 1985</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>现在</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>曾经</p></a><ul class="shortcut-icons"><a href="https://github.com/derekhe" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="body-container"><div id="post-list" class="left"><div class="home post-list"><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2013-06-15-hua-wei-san-nian-ji-nian-11-mian_shi/" class="post-title-link">华为三年纪念——(11)面试</a></h2><div class="post-info">Jun 15, 2013</div><div class="post-content"><p>12年年底，一直在忙项目，在空闲时间，买了一些书补充知识，另外在猎头网，51job等网站上，投了简历。</p>
<p>第一次猎头找我是问我能不能去韩国NHN公司，这家公司待遇挺好，但最终他们不需要做嵌入式开发的；后来又有问我要不要去诺西的，说实话有华为在，诺西的日子真的不好过，说不定过去了就倒闭了还说不准；后来就没什么音讯了。一直到春节之后，都没有什么动静。</p>
<p>春节前后的日志都是加班的日子，没日没夜的加班。整个团队已经在打疲劳战，每个周末两天的休息只能休一天，连着休的长假也一般砍掉一半。每天晚上9点以后才走人。当然，我还算好的了，晚上加班到凌晨都是常态。生病了无法休息，得赶进度。项目经理每次都把发版本的时间定在周一，这样周末两天就必须要抽一天加班，有时候必须要两天加班。系统的不稳定，硬件软件的不配合，在这个电信级的超大系统中展现的淋漓尽致。整个团队，都在崩溃的边缘，每个人都想有一个时间能够停下来休息一下。奔跑了好几个月了，都没能停下来一下。</p>
<p>然而，春节后，开发代表还给我们开了个会，说我们要提前一个月达到TR5，还问我们兴不兴奋。我只想说违背客观规律的瞎扯淡，只能体现项目管理的混乱与无能。人没有见多，时间却又要减少一个月，如何达成？开发代表只想着马儿不吃草就可以满地跑，哄哄我们就可以让我们继续？</p>
<p>这次开会后，就开始有点零星的水果作为问候了。当然，这些水果基本上都是9点以后才给你拿过来，随便吃吃罢了。当然，过来视察一下还是主要目的了。就这样，每天都反复反复，每天都在单位吃饭。在华为基地，可见每天下班后，都有很大一群人，在园区里散步，然后回去加班。一个星期，只能周六晚上和周天，能够在家和家人吃吃饭，其他时间全在公司耗着。</p>
<p>必须要改变。</p>
<p>3月底，带着试一试的心情，投了ThoughtWorks的简历。不想，第二天就给我电话面试，聊了半个多小时。通过后再约了周五去笔试。笔试真是令人抓狂，有机会大家做做就知道了。当然，明白了其中的道理以后，换个思路就容易做了。笔试完了以后，就准备做HOMEWORK了。这个我还比较有信息。我选了一题，精心准备了一下。耐心的等待了几天后，叫我去做最后的面试。</p>
<p>最后的面试，和两位TWer一起。先准备环境搞了好半天，中途的时间就一直聊天。还好我的东西多，随便聊。等环境搞好了以后，一起看了一下程序，介绍了思路，然后做Pair。他们立刻指出了我测试用例写的不怎么好，然后做一个需求。整个过程还比较顺利，但还是有点紧张，这在后面的面试中也给我提出来了。这一关过了以后，就是熊杰和周周一起面试了。</p>
<p>当时我还真没听清楚熊杰的自我介绍，隐约觉得是他吧。中间问了许多问题，还做了英语的介绍。最糟糕的是当时只准备了自我介绍的英文，结果要介绍项目，郁闷。突然就紧张起来了，憋足的英语介绍，突然感觉估计要挂了。还好，后来慢慢适应了，就不那么紧张了，讲完了。</p>
<p>中午和熊杰一起吃了饭，下午就回家了。由于是周五，HR说下周才能有结果。整个周六周天都是在紧张中度过的，一直在猜测是否搞定。星期一去上班的时候，一直等电话啊，直到下午两点过，终于迎来了电话。</p>
<p>刚开始的对话，问到了我这样那样的不足，以至于前20分钟的时间，我都觉得我没希望了。直到后来，HR说给我说一下Offer的事情，才终于尘埃落定。可以准备离开了。</p>
<p>这段时间依然加班，清明节放假加两天，我给PL沟通了离职的事情。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2013-06-01-hua-wei-san-nian-ji-nian-10-feng-kuang-de-yi_nian/" class="post-title-link">华为三年纪念——(10)疯狂的一年</a></h2><div class="post-info">Jun 1, 2013</div><div class="post-content"><p>婚假终于连着春节一起休了，在广州呆了20多天，妈妈和在肚子里三个月大宝宝和去了趟澳门。也算是个小旅游了。广州的冬天也冷得很，感觉比成都还冷。</p>
<p>过了春节回来，似乎没啥事情做了。之前做的项目戛然而止，搞得我回去都觉得奇奇怪怪的。老项目要做一些新的需求，大家又开始捣鼓以前的东东了。这段时间还不算太折腾，没事就走了。</p>
<p>3月底，由于项目组没人懂Linux和多核方面的知识，为了新的项目，领导指派我到武汉去两个月，将武汉的Linux单板的东东接回来，这算是我在单位第一次出差。两个月时间说长不短，如果真的那么长的话，完了后去广州接老婆就怀孕6个月了，坐飞机不好坐了。</p>
<p>其实过去接那些项目，上手也挺快的。Linux嵌入式系统我也熟悉，自己也编译过内核啥的，对于这个单板来说轻车熟路的就搞好了。到武汉也没人管我，住在光谷软件园E1宿舍，步行几分钟上班，附近交通还算好。就是楼下那个法院养的死狗，每天早上都很早就在哪里吼叫，搞得我最后没办法还买了防噪音耳塞。</p>
<p>结果这些任务，两周时间我就搞定了，期间还乘着周末去逛了一下长江大桥，逛了一下步行街。最后过清明节的时候自己还跑去樱花园玩了一天，好像没啥意思。油菜花在下面，樱花在上面，全是油菜花味道。公交车、出租车在那里全部瘫痪。当时风大快下雨了，我走了两三站路，终于看到个比较空的公交，随便跳上去，走出了这个破地方再打车回光谷。还好，武汉的出租车价格便宜，感觉走了很久的路也才几十块钱。</p>
<p>这段时间似乎还算是比较闲。当时车管所正在弄电脑考试的系统，为了赚钱，我开始开发一款平板上的模拟系统。业余时间就在网上不停的找视频，找规则。弄清楚规则后，还是用状态机这玩意儿，写了个安卓程序，装在平板上。通过蓝牙和车载的设备、IO进行通讯。最终还是做的挺好，和考试的功能差不多。但最终没卖掉，太贵了。这段经历也说明了，有技术不一定能赚钱，是否能有市场才是真正的考验。</p>
<p>4月初，坐动车到广州接上了老婆回家。. 6月也不是太忙，回家陪老婆的时间很多。7月份，10月的辛苦终于盼到了，可爱的小丁仔出世了。小家伙也挺能折腾的，每天睡在一起，晚上爸爸妈妈也睡不好觉。爸爸有时候半夜还要起来帮忙洗屁股。虽然很累，但看着丁仔一天一天的长大，还是挺欣慰的。</p>
<p>8月底，又听说要搞新的项目了。由于部门的资金问题及策略问题，这一年不断的再输出人。到真正要做项目的时候，要人，有没有了。新项目算是事关部门生死存亡的一个，领导到处宣传如何如何的好。但到真正开发的时候，又开始了“迭代0”。需求没搞清楚，就开始瞎胡闹了。软件部经理竟然要求大家现在就把代码开始写了。我们要做啥东西都不知道，写啥代码？</p>
<p>9月份，也在不紧不慢中度过。虽然说得比较严重，但大家都觉得没啥。我也觉得这玩意儿可能也和去年的项目一个下场。但9月底的时候，紧张的气氛越来越浓了，PL不断的告诉我们项目的时间紧迫，只有三轮迭代。更悲剧的是，他们算了下，每轮迭代的时间，包含了方案讨论、简单设计、编码、代码检视等等，内容之多。然后再告诉我们，编码时间，算下来就只有2天时间。</p>
<p>好吧，明摆着就是要我们加班。9月开始，一直都是在”抽时间写代码“，可见代码质量有多好。PL告诉我们，软件部经理觉得我们晚上9点钟走人太早了。软件部经理认为晚上9点走人，项目算是不紧的；10点半走人，项目算是刚好；凌晨走的，项目算是有点紧。听了这种话，只能说这种领导太日遭。只觉得在这种团队中，也没啥干头了。</p>
<p>我还是做了几天样子坚持到10点走，后来还是每天8点40走人。凭啥我们要生活在这样的环境下？当我们的身体累垮的时候，他们也绝不会关心你的。所以，还是要自己保命为好。</p>
<p>9月份开始，一直到年底，每周双休就休一天。没加班工资，算内部调休，也就是说没有在华为的W3上登记的，可以随时一笔勾销的调休。事实上，整个公司在6月份，就以“提高效率，减少加班”为理由，不发加班费。但项目肯定是要加班的，即便是效率再高，真的搞的定的时候，为了做样子，也要过来”加班“。在这里，我越来越感受到资本家是怎样剥夺剩余劳动力的了。没有休息，天天加班，没有盼头。累死累活得不到一句好话，这样的地方，怎能待下去？</p>
<p>11月，既然我无法改变团队，那我只能调整自己。在这里继续窝下去也只能荒废了青春，拖垮了身体。我在各大网站上填了简历，在休息时间复习一下各种知识，为离职做好了准备。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2013-05-31-hua-wei-san-nian-ji-nian-9-di-yi-nian-xia-mang-lu-de-xin-xiang_mu/" class="post-title-link">华为三年纪念——(9)第一年下，忙碌的新项目</a></h2><div class="post-info">May 31, 2013</div><div class="post-content"><p>七八月份这段时间最为无聊了，没有啥事情做，属于青黄不接的样子。在这里，上面的看着大家闲着，得搞点事情做才行，晚上也不得走，美其名曰安排一些培训，这点我十分反感。当时正值老技术卖不了钱的时候，大家都来学新技术。看胶片，看文档，晚上就来讲。每天都在磨洋工，为啥不下午组织时间来学习交流，非要搞到晚上？！</p>
<p>这段时间我经常和我的PL和PM一起走，晚上“交流”完，大概8点，大家一起走人。其实大家都想回家，只是经常走得太早，领导会看着不爽。在这种所谓的“加班”氛围中，自然做事没啥效率了。既没有真正学到东西，又浪费了时间，还少了很多自己提高的时间。</p>
<p>9月份，部门开始集中力量搞一个所谓的新产品出来。其实也是老瓶装新酒，不明确的需求，各种不同的方案都搅和在一起。心急的项目经理想在需求都还没搞清楚之前就让我们写代码了，美其名曰“迭代0”。那段时间我们以为真的是做新产品了，但总觉得产品的卖点很少，一直折腾折腾。</p>
<p>这期间的一个迭代周期，我硬是将那个乱糟糟的模块重写了，用状态机的设计模式来搞了一遍。写代码的时间，加起来也就只有几天，最终统计出来我的代码有好几千。困难重重的测试用例，用到了很多Google Test和Google Mock的高级用法。现在回想起来，由于禁锢于老代码，测试用例写的都不算太好。测试状态机时使用了太多的mock，以至于调试起来都比较困难。</p>
<p>带这些代码的质量确实很好，只是大家看不懂。第二年评优秀代码的时候，将我的代码提交了上去，但评委都说看不懂。简洁的函数，他们找不到调用的地方，不知道这些函数怎么用的。没有设计模式的思想，怎么能看懂呢？周围的同事的水平都很一般，只有一个同事能够看懂这些代码，觉得写得很优雅，这就够了。用State Machine Compiler工具，还能绘制出状态机的图，非常方便问题定位及修改。</p>
<p>当时觉得写得比较好的代码，最终还是封存在了硬盘中。连续奋战了3个月，说是要准备过TR4，结果就突然项目就没影了，停了。以至于休婚嫁回来以后，突然又做回了老版本。这意味着这个产品以失败而告终。</p>
<p>这段最忙的时间，也是我收货爱情的时光。9月份办完了婚事，10月到丽江旅游，这段时间至今映像深刻。休婚嫁的事，还好我做了计划。在8月份那阵已经和PL说了一下，但9月份起了项目。11月份，我们怀上了小宝宝，再不修婚嫁就比较烦了。又在11月份说了一下意向。这一年的春节过得比较早，1月10多号就是春节。为了玩的比较久一点，就想把这个婚嫁和春节在一起休。最终，在12月底，得到了PL的同意，说本来把这个模块搞好了，就可以休了。按照当时的进度，在1月初完成绝对没有问题。</p>
<p>就怕就怕领导插一脚。当时我们的LM生孩子去了，找了另外一个LM过来。在当我的模块做到接近尾声的时候，突然叫我到以前的项目去做一个需求。竟然要2人月时间。我的婚嫁怎么办？一肚子的火。我就只有10个工作日时间，如何完成？我要了一个人。好吧，给了我一个新员工，没差点气吐血。还好经过几天的奋战，需求搞定了。每天都是电话讨论，然后指导新员工写代码。这个新员工还好，有一定工作经验，写过代码，还算顺利完成任务。</p>
<p>可恶的是，这个LM给我说，婚假嘛，到时候可以拆开休嘛，给你算内部调休嘛，随时可以调休的。领导的饼，我消化不良。我没听他的，一直坚持要求要连着休，不给一丝退路。事实证明我的坚持是对的。我刚刚休完假回来，轮到另一个同事休，他就听了这个人的说法，休了一半。后面的几天，想休，那是再也无法连着休了。我真的很想骂脏话。</p>
<p>下半年的生活，过得算是比较辛苦。在女人怀孕的时候，要多点关照，多点温暖，早点下班，多陪陪她。切记婚假是连着休的，切勿相信领导的饼，那是有保质期的，而且特别难吃。这一年，就已经成了老员工了，人际交往中平滑而又有原则，同事相处和谐，在公司也有自己的一席地位，说话也稍微有点分量了。</p>
<p>写到这里，在华为的生活就已经过半了。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2013-05-31-enabling-dual-wan-windows/" class="post-title-link">Enabling Dual Wan on Windows</a></h2><div class="post-info">May 31, 2013</div><div class="post-content"><p>All you gotta do is add some keys into your registry and you’ll be set!</p>
<p>Browse into:<br>HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesNetBTParameters</p>
<p>and add these Dword Keys/Values:<br>RandomAdapter = 1<br>SingleResponse = 1</p>
<p>Reboot your computer.. and you’re set! Plug each modem on your ethernet board and enjoy!</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2013-05-29-hua-wei-san-nian-ji-nian-8-di-yi-nian_shang/" class="post-title-link">华为三年纪念——(8)第一年上</a></h2><div class="post-info">May 29, 2013</div><div class="post-content"><p>一年的事情，回想起来好长。</p>
<p>转正后享受着早上8点到9点的弹性，也就用不着那么早起床了。但如果每天都这么玩的话，每天的平均工时自然是不够的。所以，来得很晚的同事，为了将每天1个小时补足，只能. . 4晚上多干两个小时左右。弹性工作当然是针对所有的研发员工，但要享受这个待遇，坐班车是不可能了。租房的、开车的、抑或走路骑车的，都可以享受到这样的待遇。我总想下午早点走，所以每天早上弹性时间不久，最怕的是下午下班时，突然接到电话，说晚上要干啥干啥。</p>
<p>一个人的力量，是无法撼动整个地球的。大家是一个团体，你的效率在搞，和一群效率低下，只想着晚上加班的人在一起，只得适应这样的生活。</p>
<p>转正后，交接的两位同事也会深圳了。剩下的项目组的几个人奋斗。第一次经历产品TR5发布前的测试，真是折腾死人。一堆一堆的问题接踵而至，似乎这些问题之前都隐藏了起来。越到后面，修正问题的成本越高，每修改一个问题，都要经历自测试、代码检视、手工测试，然后提交。其实内部的DTS系统的流程还是做的比较规范的，每个步骤都有，用起来还是可以，只是稍显麻烦。虽然经历了这些步骤，但我接手的那两个模块由于太复杂，有很多的特殊条件，也没任何的Low Level Test，造成质量很难评估。</p>
<p>有一次，刚刚修改了问题上库，成都测试没问题，但刚刚要发布，深圳那边爆出了一个严重问题，由于我的修改导致。其实我就修改了一点点，牵一发动全身的这种感觉，你会觉得毛骨悚然。当时交接的同事还和我一起写的那些代码，每一行都是他看过的。居然还出现问题，那到底是我技术有问题，还是代码本身有问题？我更相信后者。我总结的只要会if..else，在这里就能混下去了，有些还混得很好。</p>
<p>我最讨厌的是出了问题以后，领导过来分析原因，扯上一堆人，最后得出一个“低级错误”。什么变量赋值又出问题啦，数值为BYTE的被赋予了WORD型造成截断啊啥的。总是批评说我们不认真、不仔细，不遵守“编程规范”等等。其实，人本来就是一个容易出错误的高级动物而已。明知道变量类型有可能改变，为什么还在用匈牙利命令法，并且最新的编程规范已经不推荐使用了。更可怕的是很多人以这个作为判断类型的。如果一个行代码这么写：</p>
<p>void func(BYTE byInput)<br>{<br>       BYTE byVar = byInput;<br>}<br>说不定哪天接口改成了WORD，虽然你修改了头文件和实现，但恐怕很难再去修改这个byInput，造成迷惑。后续代码检视时，往往可能看中间的部分，如果没看函数头，则很容易认为你这是对的。所以，我的代码中不写匈牙利命名。以至于PL批评我和大家的风格不统一，每次代码检视都给我提出。后来也为了不麻烦，还是用了一下。</p>
<p>上半年，加班不算太多，但部门已经开始慢慢的衰退。我刚才进公司时，导师给我介绍产品时，就说这个产品已经是夕阳了。每次大领导开会时，都会提到现金牛几个字来鼓舞人心。前几次，我还听得兴奋不已，后来再听的时候，只觉得是耳边风罢了。</p>
<p>这一年，公司利润很好，分红很高。在天府软件园B7楼下，还没发奖金和股票，一群售楼的就每天轮番轰炸。一些资历老一些的同事拿了分红，买个车。可见，在华为干得比较久的真是高富帅一群。但对于我们应届毕业生来讲，一切都是浮云，第一年拿到一点点奖金，只能途个羡慕。</p>
<p>上半年加班最晚的一次到了凌晨2点过到家。年中，产品过了TR6，没啥事情干了。. 7月正是慢慢火热的时候，但我感觉还比较清闲。这段时间就用来读书，我喜欢看书，看《重构》一书。</p>
<p>机遇总是给已经准备好了的人。PL找到我说有一个顾问要过来，问我有没有时间和他一起将我那个糟糕的模块做一些重构。我说有啊，PL也相当支持我的工作，至今我都感激他给了我一周的时间，能够和敏捷顾问一起坐下来，全职的投入到重构中。顾问也觉得幸运，我能有那么多的时间。他说很多时候只能到一个项目组待上一两天，零零散散的，总被员工的一些杂事或者需要定位问题等打断。</p>
<p>由于老模块的腐化很严重，一个“模块”，一个.CPP就1万多行代码，你说不乱么？我们对整个CPP做了分析，手工拆出来几个函数变成类。然后我们针对两个高达500多行的两个复杂函数，也是很容易出错的函数进行重构。对于这种大型代码，《重构》一书中提到边覆盖边重构的思路，很爽。我也是拿了书，和顾问一起，他用的方法我叫他在书中帮我提示一下，每天回家后再仔细看一下。</p>
<p>这样，我们用Google Test和Google Mock对函数进行一次一次的打桩、测试、重构、测试，将这两个函数拆成了很多个小函数，原来庞大的一个函数变成了10行以内函数，清晰度很高。每个小函数集中功能。顾问对函数的命名也颇为讲究，总是反复和我讨论抽取的函数的职责，反复研讨函数名。对于复杂逻辑，我们写真值表，将以前看起来复杂不堪的逻辑简化成了几个条件或者函数，一目了然。代码分支覆盖率100%，每一个函数都测试到了，重构起来相当放心。这种体验真是棒极了！</p>
<p>但，这个重构后的代码，并没有用于产品中，理由是大家认为这些代码没有经过长期测试，放上去怕出问题。好吧，这次的经历对我来说难得，这个星期的学习，真正让我的软件能力提升了一个档次，知道了重构的方法，为我后续的成长指明了道路。</p>
</div></article></div></div></div><div id="sidebar" class="left"><div id="about-panel"><div class="info"><div class="title">he.sicong</div><div class="url">http://www.april1985.com</div><div class="bio"></div></div><img src="/images/avatar.png" class="avatar"></div><div id="friend-links-panel"><div class="panel-title"><p>LINKS</p></div><a target="_blank" class="link-item"><div class="link-container"><div class="site-name">GitHub</div><div class="site-desc">http://github.com/derekhe</div></div></a><a target="_blank" class="link-item"><div class="link-container"><div class="site-name">简书</div><div class="site-desc">http://www.jianshu.com/u/b1e713e56ea6</div></div></a><a target="_blank" class="link-item"><div class="link-container"><div class="site-name">LinkedIn</div><div class="site-desc">https://www.linkedin.com/in/sicong-he-56a95437/</div></div></a></div></div></div><div class="clear"></div></main><footer class="footer-container"><div class="paginator"><a href="/page/9/" class="prev">PREV</a><a href="/page/11/" class="next">NEXT</a></div><div class="copyright"><p>© 2008 - 2018 <a href="http://www.april1985.com">he.sicong</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>var _mtac = {}; (function() {     var mta = document.createElement("script"); mta.src = "http://pingjs.qq.com/h5/stats.js?v2.0.2";    mta.setAttribute("name", "MTAH5");    mta.setAttribute("sid", "500490740");    var s = document.getElementsByTagName("script")[0];    s.parentNode.insertBefore(mta, s);})();</script></body></html>